<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Pedidos | ETHEREAL</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .auth-container { max-width: 500px; margin: 80px auto; padding: 20px; text-align: center; }
        .orders-container { max-width: 800px; margin: 60px auto; padding: 20px; display: none; }
        
        /* Auth Form */
        .magic-form { margin-top: 30px; }
        .magic-input { width: 100%; padding: 12px; border: 1px solid #ccc; margin-bottom: 15px; font-family: inherit; }
        .success-message { background: #e8f5e9; color: #2e7d32; padding: 15px; border-radius: 4px; display: none; }
        
        /* Order List */
        .order-card { border: 1px solid #eee; padding: 20px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; transition: 0.2s; }
        .order-card:hover { border-color: #000; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .order-info h3 { margin: 0 0 5px 0; font-size: 1.1rem; }
        .order-meta { font-size: 0.9rem; color: #666; }
        .order-status { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; margin-top: 5px; }
        .status-pagado { background: #e3f2fd; color: #0d47a1; }
        .status-enviado { background: #e8f5e9; color: #1b5e20; }
        
        .loader { display: none; margin: 20px auto; border: 4px solid #f3f3f3; border-top: 4px solid #000; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXX"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());</script>
</head>
<body>

    <nav class="navbar">
        <div class="logo-nav">
            <a href="index.html"><span class="logo-text-gothic">ETHERE4L</span></a>
        </div>
    </nav>

    <div id="login-view" class="auth-container">
        <div class="auth-icon"><i class="fa-regular fa-envelope" style="font-size: 3rem;"></i></div>
        <h1>Acceder a mis pedidos</h1>
        <p>Ingresa tu correo para recibir un enlace de acceso seguro.</p>
        
        <form id="magic-form" class="magic-form">
            <input type="email" id="email-input" class="magic-input" placeholder="tu@email.com" required>
            <button type="submit" id="btn-send" class="btn-black" style="width:100%">ENVIAR ENLACE MÁGICO</button>
        </form>

        <div id="loader" class="loader"></div>
        
        <div id="msg-success" class="success-message">
            <i class="fa-solid fa-check"></i> 
            Si tu correo está registrado, recibirás el enlace en unos momentos. Revisa tu bandeja de entrada (y spam).
        </div>
    </div>

    <div id="orders-view" class="orders-container">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2>Historial de Compras</h2>
            <div id="orders-container" class="orders-grid"></div>
            <button onclick="logout()" style="background:none; border:none; text-decoration:underline; cursor:pointer;">Salir</button>
        </div>
        <div id="orders-list">
            </div>
        <div id="empty-state" style="display:none; text-align:center; padding: 40px;">
            <p>No se encontraron pedidos recientes.</p>
            <a href="catalogo.html" class="btn-black">Ir a la tienda</a>
        </div>
    </div>

    <script src="assets/js/mis-pedidos.js" defer></script>
</body>
</html>